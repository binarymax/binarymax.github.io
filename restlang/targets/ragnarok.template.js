/* ********************************************
 *
 * HTTP API Integration Tests
 * Generated by Restlang on:
 * <%=new Date()%>
 *
 * ********************************************/

var assert = require('assert');
var should = require('should');
var ragnarok = require('ragnarok');
var tools = ragnarok.tools;
var client = ragnarok.client;

var credentials = {};

var init = function(connection){
	<% _.each(api,function(resource) { %> 
		describe('<%=resource.name%>, <%=resource.description.replace(/\'/g,"\\\'")%>',function(){
			<% _.each(resource.resource,function(route,key) { %> 
				it('<%=route.description.replace(/\'/g,"\\\'")%>',function(done){
					var request = connection['<%=key%>'];
					request&&request('<%=resource.route%>',function(err,data){
						tools.testOData(data);
						done();
					});
				});
			<% }); %>
		});
	<% }); %>
};

client(url,credentials,function(err,connection) {
	if(err) {
		console.log(err);
	} else {
		init(session);
	}
});